---
layout:	post
title:	"ยิ่งคบ.. ยิ่ง ❤️ Ruby on Rails"
date:	2020-11-09
tags: [ruby on rails]
---

จากบทความเก่า [ทำไมถึง ❤️ Ruby on Rails]({% post_url 2017-11-21-why-love-rails %}) ก็เป็นเวลาประมาณสามปีแล้วที่ไม่ได้อัพเดตกันมา ถึงในสามปีนี้จะมีเวลาที่จับ Ruby on Rails จริง ๆ เป็นเวลาแค่ประมาณ 4-5 เดือนที่ผ่านมาที่มีโอกาสได้รับงานใหม่มา คิดไปคิดมาแล้ว RoR นี่แหละเป็นอะไรที่ทำให้เราเริ่มงานได้เร็ว (อาจจะไม่ได้ใช้ทั้ง Stack โดยใช้เป็นแค่ API) เราจึงกลับมาจับอีกครั้งอย่างจริงจัง (ก่อนหน้านี้จับแหละแต่เล่น ๆ) เลยถือโอกาสเล่าสักหน่อยว่าทำไมยิ่งคบแล้ว.. ยิ่ง ❤️

ก่อนที่คิดจะเอา RoR มาใช้ในงานที่จริงจัง ก็ได้ทำการ Research เล็กน้อยว่า RoR กับปี 2020 มันเป็นอย่างไรบ้าง โดยสิ่งที่เจอก็จะวนเวียนอยู่ประมาณนี้ Ruby (+ Rails) เค้าตายรึยัง? ยังเหมาะอีกไหมที่จะใช้ในปี 2020, ทำงานช้าเกินไปแล้วไหม?

ส่วนตัวจะขอตอบจากที่ได้ Research จากที่ได้ยินได้ฟัง และ Bias ที่เข้าข้าง RoR มาตามนี้นะครับ

## Ruby (+ Rails) ยังเหมาะอีกไหมที่จะใช้ในปี 2020
เมื่อคืนมีโอกาสได้ฟัง DHH พูดใน [RailsConf 2020.2](https://www.youtube.com/watch?v=OltCr8AWpWw) เลยขอสรุปตามความเข้าใจของตัวเองนะครับ (เค้าคุยภาษาอังกฤษอะนะ ไม่แตกฉานยังไงก็ขอโทษด้วย) เค้าก็จะบอกว่าเทคโนโลยีก็จะคล้าย ๆ ลูกตุ้ม Pendulum ที่แกว่งไปแกว่งมา โดยมันก็จะแบบว่ามีอะไรที่เข้ามากระทบ แล้วทุกอย่างในฝั่งเทคโนโลยีก็จะสั่นสะเทือน แล้วก็เด้งอะไรบางอย่างโผล่ออกมา พอเทคโนโลยีที่ออกมาใหม่นั้นเกิดปัญหา ก็เอ้า กระทบกลับมาชนแผงลูกตุ้มนั้น แล้วเด้งอย่างอื่นออกมาอีก แล้ว DHH ก็บอกประมาณว่า "เฮ้ยแก เรายังอยู่ตรงนี้ เรามีสิ่งที่แกจะใช้ทำเว็บได้อย่างสมบูรณ์อยู่ตรงนี้ ถ้าแกหยุดมองดูให้ดี ๆ เรามีทางแก้ปัญหาอยู่ตรงนี้ อยู่ตรงนี้ตลอด"

ซึ่งถามว่าจริงไหม ก็ต้องตอบได้คำเดียวว่าจริง จากบทความแรกที่เคยพูดถึงว่า Rails **ดีพร้อม** ทุกวันนี้มันก็ยังดีพร้อมอยู่เหมือนเดิม ไม่สิ มัน**ดีพร้อมกว่าเดิม**ด้วยซ้ำ อย่างเมื่อสามปีก่อนคือจับเป็น Rails 4 ในสมัยนั้น ถามว่าแตกต่างอะไรกับสมัยนี้ไหม ก็ต้องตอบได้คำเดียวว่า "แตกต่าง" ในทางที่ดีขึ้น

ใน Rails 5 สิ่งที่เพิ่มขึ้นมาและมีประโยชน์มากกับโจทย์ที่ได้รับในปี 2020 ก็คือ Active Storage และ Action Cable ซึ่งสองตัวนี้ช่วยให้เราสามารถจัดการกับเรื่อง Storage และ Web Socket ได้ง่ายขึ้นมาก ถ้าถามว่ายังเหมาะอีกไหมในปี 2020 ก็ต้องตอบได้ว่า "เหมาะสิ ทำไมจะไม่เหมาะล่ะ" ให้ลองคิดภาพว่า Active Storage ก็สามารถใช้งาน Service Provider อย่าง Amazon S3 ได้แบบไม่เคอะเขิน อำนวยความสะดวกทั้งในเรื่อง Direct Upload หรือการสร้าง URL ชั่วคราวต่าง ๆ เพื่อปกป้อง S3 ของเราจากการถูกบุกรุก ซึ่งก็ไม่ต่างจาก Action Cable เราแทบไม่ต้องไปยุ่งกับ Stack ของ Web Socket ใด ๆ เพียงแค่เราเซ็ตอัพให้ถูกต้อง เราก็สามารถที่จะ Publish ข้อมูลต่าง ๆ ไปยัง Subscriber ได้ โดยไม่ต้องคิดอะไรมาก

แล้วก็ไม่ต้องถามแล้วนะครับว่ายังเหมาะอีกไหมที่จะใช้ในปี 2020 เพราะนี่ก็แค่ tip of the RoR iceberg เท่านั้นครับ สิ่งที่ Rails ทำได้ยังมีอีกเยอะมาก นี่ยังไม่รวมถึง Use Case ที่เราไปไม่ถึงอย่าง Action Mailbox หรือ Multiple Database ที่มีใน Rails 6 อีกนะครับ

## Ruby (+ Rails) ทำงานช้าเกินไปไหม
เคยไหมครับที่เรามองเทคโนโลยีบางอย่างแล้วแบบว่า "พอได้แล้วรึยัง เราต้องการมากกว่านี้จริง ๆ หรือ?" อย่างความเร็วอินเตอร์เน็ตนี่ ส่วนตัวก็ไม่รู้ว่าเราต้องดิ้นรนเพื่อความเร็วอินเตอร์เน็ตขนาดไหนถึงจะพอใจ (นี่ไม่นับพวกนักวิจัยนะ อันนั้นถือเป็น Challenge ในสายงานเค้า) การที่ต้องจ่ายเงินแพง ๆ เพื่อความเร็วเน็ตมากมาย ทั้ง ๆ ที่เราก็ไม่ได้ utilize กันเต็มความเร็วตลอดเวลา ถามว่าเราดิ้นรนให้ได้เน็ตความเร็วมากกว่าทำไมถ้าเราอยากใช้แรง ๆ แค่เป็นครั้งคราว แต่ก็ต้องแลกกับการจ่ายแพง ๆ แล้วอดไปกินสเต็กดี ๆ อย่างน้อยเดือนละมื้ออย่างนั้นหรือ

พอเรามองกลับมาที่ประเด็นว่า Ruby (+ Rails) ทำงานช้าไปไหมใน พ.ศ. นี้ เราขอยกคนแรกที่ตอบสั้น ๆ ง่าย ๆ นั้นคือความเห็นของ DHH ที่มีต่อ Ruby 3x3 นะครับ เขาก็ตอบแค่ว่า "Ruby is fast enough" แล้วความเร็วที่ Ruby 3 จะทำความเร็วได้กว่ารุ่นเก่า 3 เท่านั้น เค้าก็บอกแค่ว่าเป็นเหมือน "Free gift" แปลว่าเค้าไม่ยี่หระว่ามันจะเร็วกว่านี้อีกไหม เพราะที่เป็นอยู่ตอนนี้คือเค้าพอใจแล้ว

ส่วนในฝั่งของ Yukihiro Matsumoto คนสร้างภาษา Ruby พูดไว้ใน[งานนี้](https://www.youtube.com/watch?v=IhTXDklRLME) เค้าก็ยอมรับว่าภาษาเค้าช้ากว่าชาวบ้านจริง ๆ น่ะแหละ ถ้าเทียบกับ C, Python, Go หรืออื่น ๆ แต่สิ่งที่เค้าทำคือเค้าบอกว่าภาษา Ruby ยังไม่ตายครับ แล้วก็จะมีการพัฒนาต่อไปเรื่อย ๆ โดยในส่วนของ Performance เค้าก็พัฒนาหลายส่วนเพื่อลด Bottle neck ทั้งในส่วนของ CPU, Memory และ IO ตามลำดับ ถึงเค้าจะตัดพ้อว่าภาษาที่เค้าทำตอนเริ่มต้นจะเริ่มในช่วงของที่ CPU มี Core เดียว แล้วเค้าก็ยอมรับข้อผิดพลาดในหลาย ๆ การตัดสินใจ (เช่นการแตก Thread... มันแย่รึ อันนี้ไม่รู้) แต่เค้าก็รับรู้ และก็นำปัญหาไปแก้ไขครับ สิ่งที่ดีที่สุดของการแก้ปัญหาในขั้นแรกคือการยอมรับปัญหาครับ ซึ่งส่วนตัวคิดว่าเค้าทำอยู่ดีแล้ว แล้วผมก็จะขอติดตามผลงานเค้าครับ ถ้าออกใหม่มาจะอัพเกรดให้ดูเลย คอยดูสิ

## สรุป Ruby (+ Rails) ตายรึยัง?
กลับไปอ่าน 2 หัวข้อข้างต้นครับ ถ้ายังไม่ได้คำตอบก็กลับไปอ่านใหม่เรื่อย ๆ ครับ 😁

# สถานะของเรา ❤️
ตอนนี้เราก็รักกันดีครับ ใช้ทำงานใน Project ล่าสุด แล้วก็รู้สึกว่าลดระยะเวลาการทำงานไปได้มากจริง ๆ ไม่ต้องตัดสินใจอะไรหยุม ๆ หยิม ๆ แต่เราก็ได้ solution ที่เป็น best practice แบบ out of the box อยู่แล้ว แต่ที่ตอนนี้กังวลใจก็คือเรื่องความเร็วกับการรับโหลดคนจำนวนมากนี่แหละครับว่าตัว Rails จะรับได้ขนาดไหน ไม่อยากเห็นระบบล่มกลางคัน แต่ก็ไม่รู้จะเทสต์ยังไงเหมือนกันครับ 😅 ก็คงได้แต่ลุ้นว่า "ช้าได้ แต่อย่าล่ม" เป็นพอครับ

```
ยิ่งคบ.. ยิ่ง ❤️ ครับ
```

ขอบคุณครับ